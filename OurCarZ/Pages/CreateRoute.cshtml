@page
@using OurCarZ.Model
@model OurCarZ.Pages.CreateRouteModel
@{
}
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <script type='text/javascript'>
    var map, directionsManager;

    function GetMap()
    {
        map = new Microsoft.Maps.Map('#myMap', {
            credentials: 'AlLVvMQ7ncFUH_ZyTOTAmH0sSZvoejNtcn9OmuOtPXjsvfiRkwCDM0GFX2wNU0R0',
            /*customMapStyle: MapStyle*/
        });

        //Load the directions module.
        Microsoft.Maps.loadModule('Microsoft.Maps.Directions', function () {
            //Create an instance of the directions manager.
            directionsManager = new Microsoft.Maps.Directions.DirectionsManager(map);

            //Specify where to display the route instructions.
            directionsManager.setRenderOptions({ itineraryContainer: '#directionsItinerary' });

            //Specify the where to display the input panel
            directionsManager.showInputPanel('directionsPanel');
        });
    }

    function GetDirections() {
        //Clear any previously calculated directions.
        directionsManager.clearAll();
        directionsManager.clearDisplay();

        //Create waypoints to route between.
        var start = new Microsoft.Maps.Directions.Waypoint({ address: document.getElementById('fromTbx').value });
        directionsManager.addWaypoint(start);

        var end = new Microsoft.Maps.Directions.Waypoint({ address: document.getElementById('toTbx').value });
        directionsManager.addWaypoint(end);

        //Calculate directions.
        directionsManager.calculateDirections();
    }
    </script>
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetMap' async defer></script>
</head>
<body>
    <form method="post">
        <div id="myMap" style="position: relative; width: 800px; height: 600px;"></div>

        <div style="margin-top: 10px;">
            <label asp-for="@Model.Address.RoadName" class="custom-control-label" ></label>
            From: <input asp-for="@Model.Address.RoadName" id="fromTbx" type="text"/>
            <span asp-validation-for="Address.RoadName"></span>
            <span asp-validation-for="Route.StartPoint"></span>
            
            <label asp-for="@Model.Address.RoadName" class="custom-control-label"></label>
            To: <input asp-for="@Model.Address.RoadName" id="toTbx" type="text"/>
            <span asp-validation-for="Address.RoadName"></span>
            <span asp-validation-for="Route.FinishPoint"></span>
            <input type="submit" onclick="GetDirections()" value="Calculate"/>
        </div>

        <fieldset style="width: 800px; margin-top: 10px;">
            <legend>Simple Custom Directions Input Panel Sample</legend>
            This sample shows how to create a simple custom input panel for direction calculations.
        </fieldset>
    </form>
</body>
</html>