@page
@model OurCarZ.Pages.UserPages.RegisterPageModel
@{
    ViewData["Title"] = "Creates user";
}
@section Styles {
    <link href="@Url.Content("~/css/regpage.css")" rel="stylesheet" type="text/css" />
}
<script type='text/javascript'>
    var FormStuff = {
        init: function () {
            this.applyConditionalRequired();
            this.bindUIActions();
        },
        bindUIActions: function () {
            $("input[type='radio'], input[type='checkbox']").on("change", this.applyConditionalRequired);
        },
        applyConditionalRequired: function () {
            $(".require-if-active").each(function () {
                var el = $(this);
                if ($(el.data("require-pair")).is(":checked")) {
                    el.prop("required", true);
                } else {
                    el.prop("required", false);
                }
            });
        }
    };
    FormStuff.init();
</script>
<div class="font-container">
    <h1>Create account</h1>
    <div class="row" onload="FormStuff.init()">
        <div class="col-md-4">
            <form method="post">
                <div class="form-group">
                    <label asp-for="@Model.FirstName" class="custom-control-label">First name</label>
                    <input asp-for="@Model.FirstName" class="form-control" type="text" required />
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="@Model.LastName" class="custom-control-label">Last name</label>
                    <input asp-for="@Model.LastName" class="form-control" type="text" required />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="@Model.Email" class="custom-control-label">Email</label>
                    <input asp-for="@Model.Email" class="form-control" type="email" required />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="@Model.PhoneNumber" class="custom-control-label">Phone number</label>
                    <input asp-for="@Model.PhoneNumber" class="form-control" type="tel" required />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>

                <!-- The hidden input form for cars! Once the checkmark is checked, javascript code is run to make the extra inputs required, otherwise not required when not visible (obviously) -->
                <div class="form-group">
                    <input type="checkbox" asp-for="@Model.IsChecked" id="choice-car-yes" onclick="FormStuff.applyConditionalRequired()">
                    <label for="choice-car-yes">Do you have a car?</label>
                    <div class="reveal-if-active">
                        <label asp-for="@Model.LicensePlate" class="custom-control-label">Car License Plate</label><br>
                        <input type="text" asp-for="@Model.LicensePlate" class="require-if-active" data-require-pair="#choice-car-yes" />

                        <div class="form-container">
                            <h1>Create account</h1>

                            <form method="post">
                                <div class="form-group">
                                    <label asp-for="@Model.FirstName">First name</label>
                                    <input asp-for="@Model.FirstName" placeholder="Enter First Name" class="default-form" type="text" required />
                                    <span asp-validation-for="FirstName" class="text-danger"></span>
                                </div>

                                <div class="form-group">
                                    <label asp-for="@Model.LastName">Last name</label>
                                    <input asp-for="@Model.LastName" placeholder="Enter Last Name" class="default-form" type="text" required />
                                    <span asp-validation-for="LastName" class="text-danger"></span>
                                </div>
                            </form>
                            <div class="form-group">
                                <label asp-for="@Model.Email">Email</label>
                                <input asp-for="@Model.Email" placeholder="Enter Email" class="default-form" type="email" required />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="@Model.PhoneNumber">Phone number</label>
                                <input asp-for="@Model.PhoneNumber" placeholder="Enter Phone Number" class="default-form" type="tel" required />
                                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="@Model.LicensePlate">License Plate <br /></label>
                                <input asp-for="@Model.LicensePlate" placeholder="Enter License Plate" class="default-form" type="text" />
                                <small class="form-text text-muted">If you're not a driver, this field is not necessary.</small>
                                <span asp-validation-for="LicensePlate" class="text-danger"></span>
                            </div>
                            <div class="reveal-if-active">
                                <label asp-for="@Model.Model" class="custom-control-label">Car Make (as in brand)</label><br>
                                <input type="text" asp-for="@Model.Model" class="require-if-active" data-require-pair="#choice-car-yes" />
                                <span asp-validation-for="Model" class="text-danger"></span>
                            </div>
                            <div class="reveal-if-active">
                                <label asp-for="@Model.Year" class="custom-control-label">Car Model Year</label><br>
                                <input type="text" asp-for="@Model.Year" class="require-if-active" data-require-pair="#choice-car-yes" />
                                <span asp-validation-for="Year" class="text-danger"></span>
                            </div>
                            <div class="reveal-if-active">
                                <label asp-for="@Model.Seats" class="custom-control-label">Number of seats in car (excluding driverseat)</label><br>
                                <input type="text" asp-for="@Model.Seats" class="require-if-active" data-require-pair="#choice-car-yes" />
                                <span asp-validation-for="Seats" class="text-danger require-if-active"></span>
                            </div>
            </form>

        </div>

        <div class="form-group">
            <label asp-for="@Model.Password" class="custom-control-label">Password</label>
            <input asp-for="@Model.Password" class="form-control" type="password" required />
            <span asp-validation-for="Password" class="text-danger"></span>
            <label asp-for="@Model.ConfirmPassword" class="custom-control-label">Confirm password</label>
            <input asp-for="@Model.ConfirmPassword" class="form-control" type="password" required />
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
        <div class="form-group">
            <input type="submit" value="Create account" class="btn btn-primary" />
        </div>
        <div class="form-group">
            <label asp-for="@Model.Password">Password</label>
            <input asp-for="@Model.Password" placeholder="Enter Password" class="default-form" type="password" required />
            <span asp-validation-for="Password" class="text-danger"></span>
            <label asp-for="@Model.ConfirmPassword">Confirm password</label>
            <input asp-for="@Model.ConfirmPassword" placeholder="Reenter Password" class="default-form" type="password" required />
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
        <div class="form-group">
            <input type="submit" value="Create account" class="ubutton" />
        </div>

    </div>
</div>
<a asp-page="Index">Home</a>
</div>